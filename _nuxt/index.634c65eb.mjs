import{d as I,e as A,o as l,c as p,F as j,r as k,t as $,b as t,a as s,f as F,g as S,n as C,h as N,w as E,v as z,i as B,j as M,p as O,k as P}from"./entry.3b6d247c.mjs";const H=s("option",null,null,-1),T=["value"],V=I({__name:"pick-artifacts",props:{artifact:{}},emits:["input:artifact","change"],setup(i,{emit:f}){const{$dictionary:u,$language:b}=A(),a=g=>{const d=g.target.value,n=u.artifacts.find(m=>m.id===d);console.log(n),f("input:artifact",n),f("change",n)};return(g,d)=>(l(),p("select",{onChange:d[0]||(d[0]=n=>a(n))},[H,(l(!0),p(j,null,k(t(u).artifacts,n=>(l(),p("option",{value:n.id},$(n[t(b).selected]),9,T))),256))],32))}}),K={class:"artifact-type"},U={class:"wrapper"},G={class:"sub-options"},R=["id","onUpdate:modelValue"],J=["for"],q=["value","disabled","onInput"],L=I({__name:"artifact-detail",props:{artifact:Object},emits:["change:subop"],setup(i,{emit:f}){const u=i,{$language:b}=A(),a=u.artifact,g=F({img:""}),d=S(null),n=(h,_)=>{const v=h.target;let e=Number(v.value);isNaN(e)&&(e=0),e<0&&(e=Math.abs(e));const o=x=>Math.floor(x*10)/10;_.score=o(e),Number(v.value)!==_.score&&(v.value=`${e}`);const r={cr:2,cd:1,ar:1},c=a.sub.reduce((x,w)=>x+(w.score||0)*(r[w.id]||0),0);a.score=o(c),f("change:subop")},m=h=>{const _={flower:{ja:"\u82B1",en:"Flower"},plume:{ja:"\u7FBD",en:"Plume"},eon:{ja:"\u6642\u8A08",en:"Eon"},goblet:{ja:"\u676F",en:"Goblet"},circlet:{ja:"\u51A0",en:"Circlet"}};return console.log(h),_[h][b.selected]},y=h=>{const _={flower:"flower_of_life",plume:"plume_of_death",eon:"sands_of_eon",goblet:"goblet_of_eonothem",circlet:"circlet_of_logos"};g.img=`https://bbs.hoyolab.com/hoyowiki/picture/reliquary/${h.en}/${_[a.piece]}_icon.png`,d.value.style.backgroundImage=`url('${g.img}')`};return(h,_)=>{const v=V;return l(),p("div",{ref_key:"elArtifact",ref:d,class:"artifact"},[s("div",K,[s("div",U,[s("h3",null,$(m(t(a).piece)),1),s("span",{class:C(["score",{good:t(a).score>=30,amazing:t(a).score>=40,god:t(a).score>=50}])},$(t(a).score),3)]),N(v,{artifact:t(a),onChange:y},null,8,["artifact"])]),s("div",G,[(l(!0),p(j,null,k(t(a).sub,e=>(l(),p("div",{class:C(["sub-option",{selected:e.selected}])},[s("label",null,[E(s("input",{id:`check-${t(a).piece}-${e.name}`,type:"checkbox","onUpdate:modelValue":o=>e.selected=o},null,8,R),[[z,e.selected]]),s("label",{for:`check-${t(a).piece}-${e.name}`},$(e.name),9,J)]),s("input",{type:"number",value:e.score,disabled:!e.selected,min:"0",onInput:o=>n(o,e)},null,40,q)],2))),256))])],512)}}}),D=(i,f)=>{const u=i.__vccOpts||i;for(const[b,a]of f)u[b]=a;return u},Q=D(L,[["__scopeId","data-v-9809e811"]]),W=i=>(O("data-v-8e5bb646"),i=i(),P(),i),X={class:"title-area"},Y=W(()=>s("option",null,null,-1)),Z=["value"],ee={style:{position:"fixed",bottom:"0","max-width":"100%"}},te={style:{display:"flex","flex-wrap":"nowrap","overflow-x":"auto"}},ae=I({__name:"index",setup(i){const{$dictionary:f,$language:u}=A(),b="genshin-storage-data",a=[{id:"cr",ja:"\u4F1A\u5FC3\u7387",en:"CRIT Rate"},{id:"cd",ja:"\u4F1A\u5FC3\u30C0\u30E1",en:"CIT DMG"},{id:"em",ja:"\u5143\u7D20\u719F\u77E5",en:"Elemental Mastery",zhCH:"\u5143\u7D20\u7CBE\u901A"},{id:"er",ja:"\u5143\u7D20\u30C1\u30E3\u52B9\u7387",en:"Energy Recharge"},{id:"hp",ja:"HP",en:"HP"},{id:"hpr",ja:"HP%",en:"HP%"},{id:"atk",ja:"\u653B\u6483\u529B",en:"ATK"},{id:"ar",ja:"\u653B\u6483\u529B%",en:"ATK%"},{id:"def",ja:"\u9632\u5FA1\u529B",en:"DEF"},{id:"dr",ja:"\u9632\u5FA1\u529B%",en:"DEF%"}],g=F({img:""}),d=S(null),n=()=>["flower","plume","eon","goblet","circlet"].reduce((o,r)=>(o[r]={piece:r,level:0,score:0,typeId:"",sub:a.map(c=>({id:c.id,name:c[u.selected],score:null,selected:!1}))},o),{}),m=B("totalScore",()=>0,"$hIgvpjKUc0"),y=B("artifacts",()=>{const e=localStorage.getItem(b);return e?JSON.parse(e):n()},"$nGzFyjzVzU"),h=()=>{localStorage.setItem(b,JSON.stringify(y.value)),_()},_=()=>{const e=Object.values(y.value).reduce((o,r)=>o+r.score,0);m.value=Math.floor(e*10)/10},v=e=>{const o=e.target.value,r=f.characters.find(c=>c.id===o);if(r){const c=r.zhCN.split("\xB7")[0];g.img=`https://bbs.hoyolab.com/hoyowiki/picture/character/${c}/avatar.png`,d.value.style.backgroundImage=`url('${g.img}')`}console.log(r,g.img)};return _(),(e,o)=>{const r=Q;return l(),p("div",{ref_key:"elMain",ref:d,class:"main"},[s("div",X,[s("select",{onChange:o[0]||(o[0]=c=>v(c))},[Y,(l(!0),p(j,null,k(t(f).characters,c=>(l(),p("option",{value:c.id},$(c[t(u).selected]),9,Z))),256))],32),s("span",{class:C(["score",{good:t(m)>=140,amazing:t(m)>=170,god:t(m)>=200}])},$(t(m)),3)]),s("div",ee,[s("div",te,[(l(!0),p(j,null,k(Object.keys(t(y)),c=>(l(),M(r,{artifact:t(y)[c],"onChange:subop":h},null,8,["artifact"]))),256))])])],512)}}});const se=D(ae,[["__scopeId","data-v-8e5bb646"]]);export{se as default};
