import{d as w,o as _,c as p,a as s,t as I,n as B,_ as A,e as D,F as E,r as k,b as i,p as O,f as L,g as T,h as R,i as z,j,w as G,v as H,k as M}from"./entry.c4d386ae.mjs";const U=w({__name:"score",props:{score:{default:0},borders:{default:()=>({good:30,amazing:40,god:50})}},setup(a){const c=a;return(b,f)=>(_(),p("div",{class:B(["score",{god:c.score>=c.borders.god,amazing:c.score>=c.borders.amazing,good:c.score>=c.borders.good}])},[s("span",null,I(c.score),1)],2))}}),P=A(U,[["__scopeId","data-v-a7650256"]]),V=a=>(O("data-v-1cdb6303"),a=a(),L(),a),K=["value"],Q=V(()=>s("option",null,null,-1)),W=["value"],q=w({__name:"pick-artifacts",props:{artifact:Object},emits:["input:artifact","change"],setup(a,{emit:c}){const b=a,{$dictionary:f,$language:d}=D(),g=b.artifact,m=o=>{const v=o.target.value,u=f.artifacts.find(x=>x.id===v);c("input:artifact",u),c("change",u)};return(o,v)=>(_(),p("select",{value:i(g).typeId,onChange:v[0]||(v[0]=u=>m(u))},[Q,(_(!0),p(E,null,k(i(f).artifacts,u=>(_(),p("option",{value:u.id},I(u[i(d).selected]),9,W))),256))],40,K))}}),J=A(q,[["__scopeId","data-v-1cdb6303"]]);var y=(a=>(a.FLOWER="flowe",a.PLUME="plume",a.EON="eon",a.GOBLET="goblet",a.CIRCLET="circlet",a))(y||{});const X=[{id:"cr",ja:"\u4F1A\u5FC3\u7387",en:"CRIT Rate"},{id:"cd",ja:"\u4F1A\u5FC3\u30C0\u30E1",en:"CIT DMG"},{id:"em",ja:"\u5143\u7D20\u719F\u77E5",en:"Elemental Mastery",zhCH:"\u5143\u7D20\u7CBE\u901A"},{id:"er",ja:"\u5143\u7D20\u30C1\u30E3\u52B9\u7387",en:"Energy Recharge"},{id:"hp",ja:"HP",en:"HP"},{id:"hpr",ja:"HP%",en:"HP%"},{id:"atk",ja:"\u653B\u6483\u529B",en:"ATK"},{id:"ar",ja:"\u653B\u6483\u529B%",en:"ATK%"},{id:"def",ja:"\u9632\u5FA1\u529B",en:"DEF"},{id:"dr",ja:"\u9632\u5FA1\u529B%",en:"DEF%"}],N={flowe:{id:"flower_of_life",ja:"\u82B1",en:"Flower"},plume:{id:"plume_of_death",ja:"\u7FBD",en:"Plume"},eon:{id:"sands_of_eon",ja:"\u6642\u8A08",en:"Eon"},goblet:{id:"goblet_of_eonothem",ja:"\u676F",en:"Goblet"},circlet:{id:"circlet_of_logos",ja:"\u51A0",en:"Circlet"}},Z={class:"artifact-type"},Y={class:"wrapper"},ee={class:"text-stroke"},te={class:"sub-options"},ae={class:"wrapper"},se={class:"text-stroke"},oe=["id","onUpdate:modelValue"],ce=["for"],ne=["value","disabled","onInput"],re=w({__name:"artifact-detail",props:{artifact:Object},emits:["change:subop"],setup(a,{emit:c}){const b=a,{$language:f,$dictionary:d}=D(),g=T({img:""}),m=R(null),o=b.artifact,v=(r,l)=>{const n=r.target;let e=Number(n.value);isNaN(e)&&(e=0),e<0&&(e=Math.abs(e));const t=F=>Math.floor(F*10)/10;l.score=t(e),Number(n.value)!==l.score&&(n.value=`${e}`);const $={cr:2,cd:1,ar:1},h=o.sub.reduce((F,S)=>F+(S.score||0)*($[S.id]||0),0);o.score=t(h),c("change:subop")},u=r=>{N[r][f.selected]},x=r=>{o.typeId=r.id,C(r),c("change:subop")},C=r=>{r?(g.img=`https://bbs.hoyolab.com/hoyowiki/picture/reliquary/${r.en}/${N[o.piece].id}_icon.png`,m.value.style.backgroundImage=`url('${g.img}')`):(g.img="",m.value.style.backgroundImage="")};return z(()=>{if(o){const r=d.artifacts.find(l=>l.id===o.typeId);C(r)}}),(r,l)=>{const n=P,e=J;return _(),p("div",{ref_key:"elArtifact",ref:m,class:"artifact"},[s("div",Z,[s("div",Y,[s("h3",ee,I(u(i(o).piece)),1),j(n,{score:i(o).score},null,8,["score"])]),j(e,{artifact:i(o),onChange:x},null,8,["artifact"])]),s("div",te,[(_(!0),p(E,null,k(i(o).sub,t=>(_(),p("div",{class:B(["sub-option",{selected:t.selected}])},[s("div",ae,[s("label",se,[G(s("input",{id:`check-${i(o).piece}-${t.name}`,type:"checkbox","onUpdate:modelValue":$=>t.selected=$},null,8,oe),[[H,t.selected]]),s("label",{for:`check-${i(o).piece}-${t.name}`},I(t.name),9,ce)]),s("input",{type:"number",value:t.score,disabled:!t.selected,min:"0",onInput:$=>v($,t)},null,40,ne)])],2))),256))])],512)}}}),le=A(re,[["__scopeId","data-v-87514a37"]]),ie=a=>(O("data-v-c4589b11"),a=a(),L(),a),ue={class:"title-area"},de=["value"],_e=ie(()=>s("option",null,"(\u30AD\u30E3\u30E9\u3092\u9078\u629E)",-1)),pe=["value"],fe={style:{position:"fixed",left:"0",bottom:"0","max-width":"100vw"}},ge={style:{display:"flex","justify-content":"start"}},me=w({__name:"index",setup(a){const{$dictionary:c,$language:b,$storage:f}=D(),d=T({img:"",collapse:!1}),g=R(null),m=[y.FLOWER,y.PLUME,y.EON,y.GOBLET,y.CIRCLET],o=()=>m.reduce((n,e)=>(n[e]={piece:e,level:0,score:0,typeId:"",sub:X.map(t=>({id:t.id,name:t[b.selected],score:null,selected:!1}))},n),{characterId:""}),v=()=>{f.updateArtifacts(l.value),u()},u=()=>{const n=m.reduce((e,t)=>e+l.value[t].score,0);r.value=Math.floor(n*10)/10},x=n=>{const e=n.target.value;C(e)},C=n=>{const e=c.characters.find(t=>t.id===n);if(l.value.characterId=n,e){const t=e.zhCN.split("\xB7")[0];d.img=`https://bbs.hoyolab.com/hoyowiki/picture/character/${t}/avatar.png`,g.value.style.backgroundImage=`url('${d.img}')`}else d.img="",g.value.style.backgroundImage="";f.updateArtifacts(l.value)},r=M("totalScore",()=>0,"$nDXZ0Q545G"),l=M("artifacts",()=>f.getArtifacts()||o(),"$Jm3IQFRm43");return z(()=>{l&&(C(l.value.characterId),u())}),(n,e)=>{const t=P,$=le;return _(),p("div",{ref_key:"elMain",ref:g,class:"main"},[s("div",ue,[s("select",{class:"character clear",value:i(l).characterId,onChange:e[0]||(e[0]=h=>x(h))},[_e,(_(!0),p(E,null,k(i(c).characters,h=>(_(),p("option",{value:h.id},I(h[i(b).selected]),9,pe))),256))],40,de),j(t,{score:i(r),borders:{good:140,amazing:170,god:200}},null,8,["score"])]),s("div",fe,[s("div",ge,[s("a",{class:"material-icons expand",onClick:e[1]||(e[1]=h=>d.collapse=!d.collapse)},I(d.collapse?"expand_less":"expand_more"),1)]),s("div",{class:B({collapse:d.collapse}),style:{display:"flex","flex-wrap":"nowrap","overflow-x":"auto"}},[(_(),p(E,null,k(m,h=>j($,{artifact:i(l)[h],"onChange:subop":v},null,8,["artifact"])),64))],2)])],512)}}});const ve=A(me,[["__scopeId","data-v-c4589b11"]]);export{ve as default};
